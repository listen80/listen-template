{"version":3,"file":"lt.min.js","sources":["../src/utils.js","../src/compile.js","../src/index.js"],"sourcesContent":["function toString(value) {\n  if (value == undefined) {\n    value = \"\";\n  } else {\n    value += \"\";\n  }\n  return value;\n}\n\nconst map = {\n  \"<\": \"&#60;\",\n  \">\": \"&#62;\",\n  '\"': \"&#34;\",\n  \"'\": \"&#39;\",\n  \"&\": \"&#38;\",\n};\nfunction escape(value) {\n  return toString(value).replace(/&(?![\\w#]+;)|[<>\"']/g, function (s) {\n    return map[s];\n  });\n}\n\nfunction ArrayLike(obj) {\n  return obj && typeof obj.length === \"number\";\n}\n\nfunction forEach(data, callback) {\n  var i,\n    len,\n    count = 0;\n  if (ArrayLike(data)) {\n    for (i = 0, len = data.length; i < len; i++) {\n      callback.call(data, data[i], i, i);\n    }\n  } else {\n    for (i in data) {\n      if (data.hasOwnProperty(i)) {\n        callback.call(data, data[i], i, count);\n        count++;\n      }\n    }\n  }\n}\n\nmodule.exports = {\n  toString,\n  forEach,\n  escape,\n};\n","function echo(code) {\n  return \"$o+=\" + code + \";\";\n}\n\nfunction for_html(code) {\n  if (code) {\n    return echo(\n      \"'\" +\n        code\n          .replace(/('|\\\\)/g, \"\\\\$1\")\n          .replace(/\\r/g, \"\\\\r\")\n          .replace(/\\n/g, \"\\\\n\") +\n        \"'\"\n    );\n  } else {\n    return code;\n  }\n}\n\nfunction for_js(code) {\n  var split = code.replace(/^\\s+|\\s+$/, \"\").split(/\\s+/);\n  var key = split.shift();\n  switch (key) {\n    case \"if\":\n      code = \"if(\" + split.join(\" \") + \"){\";\n      break;\n\n    case \"else\":\n      code = \"}else{\";\n      break;\n\n    case \"elif\":\n    case \"elseif\":\n      code = \"}else if(\" + split.join(\" \") + \"){\";\n      break;\n\n    case \"/if\":\n      code = \"};\";\n      break;\n\n    case \"for\":\n      split[0] = split[0] || \"$d\";\n      split[1] = split[1] || \"$v\";\n      split[2] = split[2] || \"$k\";\n      code = \"$f(\" + split.shift() + \",function(\" + split.join() + \"){\";\n      break;\n\n    case \"/for\":\n      code = \"});\";\n      break;\n\n    case \"eval\":\n      code = code + \";\";\n      break;\n\n    case \"escape\":\n      code = echo(\"$e(\" + split.join(\" \") + \")\");\n      break;\n\n    case \"include\":\n      code = echo(\"$t(\" + split[0] + \")(\" + split[1] + \")\");\n      break;\n\n    default:\n      code = echo(\"$s(\" + code + \")\");\n      break;\n  }\n  return code;\n}\n\nfunction compile(source) {\n  var code = \"'use strict';var $t=this,$e=$t.$e,$f=$t.$f,$s=$t.$s,$o='';\";\n  var codes = source.split(/\\{|\\}/);\n  for (var i = 0, len = codes.length; i < len; i++) {\n    i % 2 === 0 ? (code += for_html(codes[i])) : (code += for_js(codes[i]));\n  }\n  code += \"return $o;\";\n  return new Function(\"$d\", code);\n}\n\nmodule.exports = { compile };\n","const { toString, forEach, escape } = require(\"./utils\");\nconst { compile } = require(\"./compile\");\n\nconst cache = {};\n\nfunction build(tpl) {\n  const func = compile(tpl);\n  return function (data) {\n    return func.call(lt, data);\n  };\n}\n\nfunction lt(tpl, id) {\n  tpl += \"\";\n  let el;\n  if (cache[tpl]) {\n    return cache[tpl];\n  } else if ((el = document.getElementById(tpl))) {\n    id = id || tpl;\n    tpl = el.innerHTML;\n  }\n  return (cache[id] = build(tpl));\n}\n\nlt.$e = escape;\nlt.$f = forEach;\nlt.$s = toString;\n\nmodule.exports = lt;\n"],"names":["toString","value","undefined","map","utils","forEach","data","callback","i","len","obj","count","length","call","hasOwnProperty","escape","replace","s","echo","code","for_html","for_js","split","shift","join","compile_1","compile","source","codes","Function","require$$0","require$$1","cache","lt","tpl","id","el","document","getElementById","innerHTML","func","build","$e","$f","$s"],"mappings":"mOAAA,SAASA,EAASC,GAMhB,OALaC,MAATD,EACFA,EAAQ,GAERA,GAAS,GAEJA,CACT,CAEA,MAAME,EAAM,CACV,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,QACL,IAAK,SA8BP,IAAAC,EAAiB,CACjBJ,SAAEA,EACFK,QApBA,SAAiBC,EAAMC,GACrB,IAAIC,EACFC,EANeC,EAOfC,EAAQ,EACV,IARiBD,EAQHJ,IAPsB,iBAAfI,EAAIE,OAQvB,IAAKJ,EAAI,EAAGC,EAAMH,EAAKM,OAAQJ,EAAIC,EAAKD,IACtCD,EAASM,KAAKP,EAAMA,EAAKE,GAAIA,EAAGA,QAGlC,IAAKA,KAAKF,EACJA,EAAKQ,eAAeN,KACtBD,EAASM,KAAKP,EAAMA,EAAKE,GAAIA,EAAGG,GAChCA,IAIR,EAKAI,OA/BA,SAAgBd,GACd,OAAOD,EAASC,GAAOe,QAAQ,wBAAwB,SAAUC,GAC/D,OAAOd,EAAIc,EACf,GACA,GCpBA,SAASC,EAAKC,GACZ,MAAO,OAASA,EAAO,GACzB,CAEA,SAASC,EAASD,GAChB,OAAIA,EACKD,EACL,IACEC,EACGH,QAAQ,UAAW,QACnBA,QAAQ,MAAO,OACfA,QAAQ,MAAO,OAClB,KAGGG,CAEX,CAEA,SAASE,EAAOF,GACd,IAAIG,EAAQH,EAAKH,QAAQ,YAAa,IAAIM,MAAM,OAEhD,OADUA,EAAMC,SAEd,IAAK,KACHJ,EAAO,MAAQG,EAAME,KAAK,KAAO,KACjC,MAEF,IAAK,OACHL,EAAO,SACP,MAEF,IAAK,OACL,IAAK,SACHA,EAAO,YAAcG,EAAME,KAAK,KAAO,KACvC,MAEF,IAAK,MACHL,EAAO,KACP,MAEF,IAAK,MACHG,EAAM,GAAKA,EAAM,IAAM,KACvBA,EAAM,GAAKA,EAAM,IAAM,KACvBA,EAAM,GAAKA,EAAM,IAAM,KACvBH,EAAO,MAAQG,EAAMC,QAAU,aAAeD,EAAME,OAAS,KAC7D,MAEF,IAAK,OACHL,EAAO,MACP,MAEF,IAAK,OACHA,GAAc,IACd,MAEF,IAAK,SACHA,EAAOD,EAAK,MAAQI,EAAME,KAAK,KAAO,KACtC,MAEF,IAAK,UACHL,EAAOD,EAAK,MAAQI,EAAM,GAAK,KAAOA,EAAM,GAAK,KACjD,MAEF,QACEH,EAAOD,EAAK,MAAQC,EAAO,KAG/B,OAAOA,CACT,KAYAM,EAAiB,CAAEC,QAVnB,SAAiBC,GAGf,IAFA,IAAIR,EAAO,6DACPS,EAAQD,EAAOL,MAAM,SAChBd,EAAI,EAAGC,EAAMmB,EAAMhB,OAAQJ,EAAIC,EAAKD,IAC5BW,GAAfX,EAAI,GAAM,EAAaY,EAASQ,EAAMpB,IAAgBa,EAAOO,EAAMpB,IAGrE,OADAW,GAAQ,aACD,IAAIU,SAAS,KAAMV,EAC5B,GC9EA,MAAMnB,SAAEA,EAAQK,QAAEA,EAAOU,OAAEA,GAAWe,GAChCJ,QAAEA,GAAYK,EAEdC,EAAQ,CAAA,EASd,SAASC,EAAGC,EAAKC,GAEf,IAAIC,EACJ,OAAIJ,EAFJE,GAAO,IAGEF,EAAME,KACHE,EAAKC,SAASC,eAAeJ,MACvCC,EAAKA,GAAMD,EACXA,EAAME,EAAGG,WAEHP,EAAMG,GAhBhB,SAAeD,GACb,MAAMM,EAAOd,EAAQQ,GACrB,OAAO,SAAU5B,GACf,OAAOkC,EAAK3B,KAAKoB,EAAI3B,EACzB,CACA,CAWsBmC,CAAMP,GAC5B,QAEAD,EAAGS,GAAK3B,EACRkB,EAAGU,GAAKtC,EACR4B,EAAGW,GAAK5C,EAESiC"}